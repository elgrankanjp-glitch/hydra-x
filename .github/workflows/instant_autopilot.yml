name: HYDRA-X Autopilot Hourlyname: HYDRA-X Autopilot Hourly
on:
  push:
    branches: [ main ]
    paths:
      - '.github/workflows/autopilot_hourly.yml'
  workflow_dispatch: {}
  schedule:
    - cron: "0 * * * *"   # cada hora

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Build site (único paso, sin dependencias)
        run: |
          set -e
          python3 - << 'PY'
          import os, re, json, random, hashlib, urllib.request, urllib.error, xmlrpc.client
          from datetime import datetime
          from pathlib import Path

          owner_repo = os.getenv("GITHUB_REPOSITORY","owner/repo")
          owner, repo = (owner_repo.split("/") + ["",""])[:2]
          BASE = f"https://{owner}.github.io/{repo}"

          ROOT = Path("public"); ROOT.mkdir(parents=True, exist_ok=True)
          (ROOT/"static").mkdir(parents=True, exist_ok=True)
          (ROOT/".nojekyll").write_text("", encoding="utf-8")

          PAYPAL = "https://paypal.me/nostrodamus777"
          IBAN = "ES15830001149095288889"
          POSTS_PER_LANG = 24    # ES + EN = 48 posts por ejecución

          CSS = """:root{color-scheme:light dark}*{box-sizing:border-box}
          body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;color:#0f172a;background:#fff}
          header,footer{padding:16px;background:#0f172a;color:#fff}
          .wrap{max-width:980px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
          nav a{color:#fff;text-decoration:none;margin-left:12px}nav a:hover{text-decoration:underline}
          main{max-width:980px;margin:0 auto;padding:24px 16px}
          .cta{margin:24px 0;padding:12px 16px;border:1px solid #06b6d4;background:#ecfeff;border-radius:8px}
          .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
          .muted{color:#64748b}.btn{background:#0ea5e9;color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none;margin-right:8px;display:inline-block}
          .btn.ghost{background:#e2e8f0;color:#0f172a}.copy{margin-left:8px;padding:6px 10px;border:1px solid #94a3b8;background:#e2e8f0;border-radius:6px;cursor:pointer}
          code{background:#f1f5f9;padding:2px 6px;border-radius:6px}article h1{margin-bottom:0}hr{border:none;border-top:1px solid #e2e8f0;margin:16px 0}
          """
          (ROOT/"static"/"styles.css").write_text(CSS, encoding="utf-8")

          seeds_es = ["automatización con ia para restaurantes","micro saas de facturación","prompts para productividad personal","embudos de ventas sin anuncios","seo programático para nichos","chatbots de atención al cliente open source","monetización con afiliación 2025","plantillas de captación de leads b2b","automatizar procesos con n8n","landing pages de alta conversión","productos digitales de bajo esfuerzo","newsletter de curación de contenidos","modelos de negocio sin inventario","cómo crear datasets útiles","licenciamiento de contenido embebible","ideas de micro saas 2025","automatización para ecommerce","agentes autónomos para pymes","marketing de contenidos con ia","estrategias de referidos éticas","integraciones con zapier y make","auditoría de analytics para pymes","lead magnets efectivos","copywriting con ia","gestión de reputación online","scrapers éticos y legales","automatización de email marketing","servicio técnico con bots","venta consultiva con ia","apertura de nuevos nichos con seo"]
          seeds_en = ["ai automation for small businesses","micro saas billing ideas","best prompts for productivity","zero ad growth loops","programmatic seo for long tail","open source customer support chatbots","affiliate monetization in 2025","b2b lead 
on:
  push:
    branches: [ main ]
    paths:
      - '.github/workflows/autopilot_hourly.yml'
  workflow_dispatch: {}
  schedule:
    - cron: "0 * * * *"   # cada hora

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Build site (único paso, sin dependencias)
        run: |
          set -e
          python3 - << 'PY'
          import os, re, json, random, hashlib, urllib.request, urllib.error, xmlrpc.client
          from datetime import datetime
          from pathlib import Path

          owner_repo = os.getenv("GITHUB_REPOSITORY","owner/repo")
          owner, repo = (owner_repo.split("/") + ["",""])[:2]
          BASE = f"https://{owner}.github.io/{repo}"

          ROOT = Path("public"); ROOT.mkdir(parents=True, exist_ok=True)
          (ROOT/"static").mkdir(parents=True, exist_ok=True)
          (ROOT/".nojekyll").write_text("", encoding="utf-8")

          PAYPAL = "https://paypal.me/nostrodamus777"
          IBAN = "ES15830001149095288889"
          POSTS_PER_LANG = 24    # ES + EN = 48 posts por ejecución

          CSS = """:root{color-scheme:light dark}*{box-sizing:border-box}
          body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;color:#0f172a;background:#fff}
          header,footer{padding:16px;background:#0f172a;color:#fff}
          .wrap{max-width:980px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
          nav a{color:#fff;text-decoration:none;margin-left:12px}nav a:hover{text-decoration:underline}
          main{max-width:980px;margin:0 auto;padding:24px 16px}
          .cta{margin:24px 0;padding:12px 16px;border:1px solid #06b6d4;background:#ecfeff;border-radius:8px}
          .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
          .muted{color:#64748b}.btn{background:#0ea5e9;color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none;margin-right:8px;display:inline-block}
          .btn.ghost{background:#e2e8f0;color:#0f172a}.copy{margin-left:8px;padding:6px 10px;border:1px solid #94a3b8;background:#e2e8f0;border-radius:6px;cursor:pointer}
          code{background:#f1f5f9;padding:2px 6px;border-radius:6px}article h1{margin-bottom:0}hr{border:none;border-top:1px solid #e2e8f0;margin:16px 0}
          """
          (ROOT/"static"/"styles.css").write_text(CSS, encoding="utf-8")

          seeds_es = ["automatización con ia para restaurantes","micro saas de facturación","prompts para productividad personal","embudos de ventas sin anuncios","seo programático para nichos","chatbots de atención al cliente open source","monetización con afiliación 2025","plantillas de captación de leads b2b","automatizar procesos con n8n","landing pages de alta conversión","productos digitales de bajo esfuerzo","newsletter de curación de contenidos","modelos de negocio sin inventario","cómo crear datasets útiles","licenciamiento de contenido embebible","ideas de micro saas 2025","automatización para ecommerce","agentes autónomos para pymes","marketing de contenidos con ia","estrategias de referidos éticas","integraciones con zapier y make","auditoría de analytics para pymes","lead magnets efectivos","copywriting con ia","gestión de reputación online","scrapers éticos y legales","automatización de email marketing","servicio técnico con bots","venta consultiva con ia","apertura de nuevos nichos con seo"]
          seeds_en = ["ai automation for small businesses","micro saas billing ideas","best prompts for productivity","zero ad growth loops","programmatic seo for long tail","open source customer support chatbots","affiliate monetization in 2025","b2b lead 
